'use strict';
var path = require('path');
var template = require('art-template');

module.exports = function(grunt) {
    grunt.registerMultiTask('template', 'template inheritance and sub template', function() {
        var options = this.options({
            //模板根目录
            root: '/',
            //默认后缀名
            extname: '.html'
        });
        template.defaults.root = options.root;
        template.defaults.extname = options.extname;
        this.files.forEach(function(f) {
            var fileList = f.src.filter(function(filepath) {
                if (!grunt.file.exists(filepath)) {
                    grunt.log.warn('Source file "' + filepath + '" not found.');
                    return false;
                } else {
                    return true;
                }

            }).map(function(filepath) {
                return filepath;
            });


            console.log(fileList);
        });

    });
};